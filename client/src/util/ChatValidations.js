import persianRex from "persian-rex";

import { Base64 } from "js-base64";
const MIN_WORDS = 2;
const MAX_WORDS = 28;
const MIN_CHARS = 3;
const MAX_CHARS = 125;
const MAX_DUPLICATE_WORD_PERCENTAGE = 40;
const BAD_WORDS = [
  "2obYsw==",
  "2q/ZiNiy",
  "2YTYrNmG",
  "2qnYq9in2YHYqg==",
  "2KjbjCDYtNix2YE=",
  "2KjbjNi02LnZiNix",
  "2q/ZiNmH",
  "2qnZiNmG",
  "2qnbjNix24w=",
  "2qnYs9qp2LQ=",
  "2KjbjCDZhtin2YXZiNiz",
  "2LParyDZvtiv2LE=",
  "2b7Yr9ix2LParw==",
  "2LTYp9i0",
  "2LHbjNiv2YY=",
  "2LHbjNiv24w=",
  "2qnZiNmG24w=",
  "2K/bjNmI2LM=",
  "2KfZhtuM",
  "2q/Zh9uM",
  "2KjbjCDZvtiv2LE=",
  "2YXYp9iv2LHYs9qv",
  "2KjbjCDZhtin2YXZiNiz",
  "2KzZhtiv2Yc=",
  "2q/Yp9uM2K/bjA==",
  "2q/Yp9uM2K/Zhg==",
  "2qnbjNix",
  "2qnbjNix2Yjaqdiz",
  "2LnZhdiq2Yg=",
  "2K7ZgdmHINi02Yg=",
  "2K7ZgdmHINiu2YjZhg==",
  "2YXYsdi2INiv2KfYsduM",
  "2YXYsdi22K/Yp9ix24w=",
  "2q/Ysdiv2YYg2K/Ysdin2LI=",
  "2K/Zh9mG2KrZiNio2KjZhtiv",
  "2KfZhtqv2YQ=",
  "2KLYtNi62KfZhA==",
  "2K7YsdmB2Ko=",
  "2b7ZvtmH",
  "2YLYsdiq24w=",
  "2q/ZiNiy2Yg=",
  "2qnZiNmG2K/Zhw==",
  "2qnZiNmGINiv2Yc=",
  "2q/Yp9qv2YjZhA==",
  "2KfYqNmE2Yc=",
  "2q/Zhtiv2Ycg2q/ZiNiy",
  "2qnZhNmHINqp24zYsduM",
  "2K/Yrtiq2LHZgtix2KrbjA==",
  "2K7ZiNin2YfYsdis2YbYr9mH",
  "2YXYp9iv2LHYrNmG2K/Zhw==",
  "2YTYrtiq",
  "2KjYrtmI2LHYtA==",
  "2KjZvtix2LPYsdi0",
  "2KjZvtix2LHZiNi0",
  "2KjbjNin2KjYrtmI2LHYtA==",
  "2YXbjNiu2YjYsduM2LQ=",
  "2KjZhdin2YQ=",
  "2K/bjNmI2LMg2K7Yp9mG",
  "2LLYsdmG2LLZhg==",
  "2LLZhiDYrNmG2K/Zhw==",
  "2KjaqdmG2YXYqg==",
  "2KjaqdmGINiq2YjYtA==",
  "2KjaqdmG2LQ=",
  "2YTYsg==",
  "2LPaqdiz",
  "2LPaqdiz24w=",
  "2LPYp9qp",
  "2LPYp9qpINio2LLZhg==",
  "2b7ZiNix2YY=",
  "2LPaqdiz24zbjA==",
  "2qnZiNmG2YY=",
  "2qnbjNix2LE=",
  "2KzYp9qp2LQ=",
  "2KfZhtuM",
  "2K7Yp9uM2Yc=",
  "2K7Yp9uM2Ycg2YXYp9mE",
  "2K7Yp9uM2Ycg2K7ZiNix",
  "2YXZhdmH",
  "2YXZhdmHINiu2YjYsQ==",
  "2K/Yrtiq2LHYrNmG2K/Zhw==",
  "2K7Yp9ix2qnYs9iv2Yc=",
  "2qnYsyDZhtmG2Ko=",
  "2qnbjNix2K/ZiNiz",
  "2YXYp9iv2LHaqdmI2YbbjA==",
  "2K7Yp9ix2qnYs9iv2Yc=",
  "2K7Yp9ix2qnYsyDYr9mH",
  "2qnbjNix2Yjaqdiz",
  "2qnYsyDZiCDaqduM2LE=",
  "2LLZhtin",
  "2LLZhtin2LLYp9iv2Yc=",
  "2YjZhNiv2LLZhtin",
  "2YXZhNmG2q8=",
  "2LPYp9iv24zYs9mF24w=",
  "2YHYp9it2LTZhw==",
  "2K7Yp9mG2YUg2KzZhtiv2Yc=",
  "2YHYp9it2LTZhyDYrtin2YbZhQ==",
  "2LPbjNqp2KrbjNix",
  "2LPYs9qp24w=",
  "2qnYsyDYrtuM2LM=",
  "2K3YtNix24w=",
  "2q/Yp9uM24zYr9mG",
  "2Kjaqdin2LHYqg==",
  "2K/Yp9m",
  "2KjahtmHINqp2YjZhtuM",
  "2qnYs9i02LnYsQ==",
  "2LPYsdqp24zYsQ==",
  "2LPZiNix2KfYriDaqdmI2YY=",
  "2K3YtNix24wg2LTYr9mG",
  "2qnYsyDaqdix2K/Zhg==",
  "2qnYsyDYr9in2K/Zhg==",
  "2KjaqdmGINio2qnZhg==",
  "2LTZgiDaqdix2K/Zhg==",
  "2qnYsyDZhNuM2LPbjNiv2YY=",
  "2KLYqCDaqduM2LE=",
  "2KzYp9qp2LQ=",
  "2KzZhNmCINiy2K/Zhg==",
  "2KzZhtiv2Ycg2K7Yp9mG2Yc=",
  "2LTZh9mI2KrbjA==",
  "2LnZhg==",
  "2YLYsw==",
  "2qnYsdiv2YY=",
  "2qnYsdiv2YbbjA==",
  "2qnYsyDZhNuM2LM=",
  "2qnYsyDaqdi0",
  "2qnZiNiz",
  "2qnbjNix2YXaqduM2K/Zhg==",
  "2YTYp9qp2YjZhtuM",
  "2b7Ys9iq2KfZhg==",
  "2KLZhNiq",
  "2KLZhNiqINiq2YbYp9iz2YTbjA==",
  "2YbYsdqp2K/Zhw==",
  "2YXYp9mE2YjZhtiv2YY=",
  "2LPZiNmE2KfYrg==",
  "2KzZhtiz24w=",
  "2K/ZiNis2YbYs9mH",
  "2LParyDYqtmIINix2YjYrdiq",
  "2KjbjCDYutuM2LHYqg==",
  "2YbYudi02Yc=",
  "2KjbjCDYudmB2Ko=",
  "2YXYp9iv2LHZgtmH2YjZhw==",
  "2b7ZhNi02Ko=",
  "2b7YsduM2YjYrw==",
  "2qnZhNmHINqp24zYsduM",
  "2qnbjNix2YbYp9iy",
  "2b7YtNmF2KfZhQ==",
  "2YTYrtiq24w=",
  "2qnYs9qp24zYsQ==",
  "2qnZiNmG2LTZiA==",
  "2K/ZiNmE",
  "2LTZhtqv2YjZhA==",
  "2qnbjNix2K/Ysdin2LI=",
  "2K/Yp9mBINmG2KfYsg==",
  "2LPaqdiz24zZhQ==",
  "2qnZiNi1",
  "2LPYp9qp2YjZhtuM",
  "2qnZiNmGINqv2YbYr9mH",
  "2LPaqdiz24wg2KjYp9i0",
  "2qnYs9iu2YQ=",
  "2LXbjNi62Ycg2KfbjA==",
  "2q/ZiNi0INiv2LHYp9iy",
  "2K/Ysdin2LLar9mI2LQ=",
  "2KrZiNmE2Ycg2LParw==",
  "2YXYp9qGINqp2LHYr9mG24w=",
  "2KfYs9qp2YQ=",
  "2YfbjNiy",
  "2KjbjNmG2KfZhdmI2LM=",
  "2KfZiNiz2qnZhA==",
  "2KjbjCDYotio2LHZiA==",
  "2YTYp9i024w=",
  "2YTYp9i0INqv2YjYtNiq",
  "2KjYp9iz2YY=",
  "2Kzaqdiz",
  "2LParyDYtdmB2Ko=",
  "2qnYtdqp2LQ=",
  "2YXYtNix2YjYqA==",
  "2LnYsdmCINiu2YjYsQ==",
  "2LPaqdizINqG2Ko=",
  "2LPYsdiu2YjYsQ==",
  "2qnZhNmB2Ko=",
  "2K3YtNix",
  "2YTYp9iz",
  "2LLYp9ix2Ko=",
  "2K7YsQ==",
  "2q/Yp9mI",
  "2q/ZiNiz2YHZhtiv",
  "2qnYsdmF",
  "2KfZhNin2YI=",
  "2KfZhNin2Lo=",
  "2KfYrdmF2YI=",
  "2KjbjCDYtNi52YjYsQ==",
  "2K3YsdmI2YXYstin2K/Zhw==",
  "2qnZiNmG24w=",
  "2q/Zhw==",
  "2YXYp9iv2LEg2KzZhtiv2Yc=",
  "2qnYqw==",
  "2qnYtQ==",
  "2b7Ys9mI2YY=",
  "2K7Yp9ix2qnYs9mR2Yc=",
  "2K/Zh9mGINqv2KfbjNuM2K/Zhw==",
  "2K/Zh9mGINiz2LHZiNuM2LM=",
  "2b7Yr9ixINiz2q8=",
  "2b7Yr9ixINiz2YjYrtiq2Yc=",
  "2b7Yr9ixINi12YTZiNin2KrbjA==",
  "2YTYp9mF2LXYqA==",
  "2LLZhtuM2qnZhw==",
  "2YXYsdiq24zaqdmH",
  "2YXYsdiv24zaqdmH",
  "2KjbjCDYrtin24zZhw==",
  "2LnZiNi224w=",
  "2KfYs9qv2YQ=",
  "2KfZiNiz2qnZhA==",
  "2KfZiNiz2q/ZhA==",
  "2KfZiNi12q/ZhA==",
  "2KfZiNi12qnZhA==",
  "2K/bjNmI2Ks=",
  "2K/bjNmI2LU=",
  "2YLYsdmF2LXYp9mC",
  "2YLYsdmF2LPYp9mC",
  "2LrYsdmF2LPYp9mC",
  "2LrYsdmF2LXYp9mC",
  "2YHbjNmE2YUg2LPZiNm+2LE=",
  "2obYp9mC2KfZhA==",
  "2obYp9i62KfZhA==",
  "2obYsyDYrtmI2LE=",
  "2qnYsyDYrtmI2LE=",
  "2qnYsyDYrtmE",
  "2qnZiNizINiu2YjYsQ==",
  "2qnZiNizINiu2YQ=",
  "2qnYtSDZhNuM2LM=",
  "2qnYqyDZhNuM2LM=",
  "2qnYsyDZhNuM2LM=",
  "2qnZiNi1INmE24zYsw==",
  "2qnZiNirINmE24zYsw==",
  "2qnZiNizINmE24zYsw==",
  "2qnZiNmGINiz2YjYsdin2K4=",
  "2LPZiNix2KfYriDaqdmI2YY=",
  "2qnZiNmGINm+2YbbjNix",
  "2LParyDYr9mH2YY=",
  "2KzYp9qp2LQ=",
  "2q/ZiNmH",
  "2KrYrtmFINiz2q8=",
  "2LXbjNqp",
  "2q/ZiNiyINio2KfZgtin2YTZig==",
  "2YTYp9i024w=",
  "2Ybaqdio2Ko=",
  "2LnZhtiq2LE=",
  "2b7ZgduM2YjYsg==",
  "2LnZhg==",
  "2LnZhiDYqtix",
  "2K7Yp9uM2Ycg2YXYp9mE",
  "2LTZiNix2KrZhSDZhdin2LPaqdiq",
  "2KfYs9qp2YQ=",
  "2q/ZiNiy2Yg=",
  "2KfYs9qv2YjZhA==",
  "2LnZhdmHINmG2YbZhw==",
  "2qnZiNmGINiq2b7ZhA==",
  "2KrYrtmF24w=",
  "2K/Zh9mG2Kog2LPYsdmI24zYsw==",
  "2LLYqNin2YTZhw==",
  "2YTYpyDZvtin",
  "2Ybar9in24zbjNiv2YU=",
  "2KjZhyDaqduM2LHZhQ==",
  "2KjZhyDYqtiu2YXZhQ==",
  "2KjZhyDahtm+2YU=",
  "2K/Yp9qvINin2LPYqtin24zZhNqp2YjZhtiv2Ycg2K7Yp9ix",
  "2qnZiNmG2K/ZhyDYrtmI2KfYsQ==",
  "2KzbjNmG2K/Ypw==",
  "2qnYp9iz2qnYtA==",
  "2LLZhiDaqdin2LPYr9mH",
  "2LLZhiDYrNmG2K/Zhw==",
  "2LLZhtinINiy2KfYr9mH",
  "24zYqNmGINiy2YbYpw==",
  "2KfYqNmGINuM2LLbjNiv",
  "2YHYp9qpINmB24zYsw==",
  "2K7bjCDaqdin2LM=",
  "2q/bjCDYstmG",
  "2q/bjNiu2YjYp9ix",
];

const isContentValid = (content) => {
  const words = content.split(" ");
  let error = null;
  let isValid = true;
  if (!(words.length >= MIN_WORDS))
    return `لطفاً جملاتی بلند‌تر از ${MIN_WORDS - 1} کلمه انتخاب کنید`;
  if (!(words.length <= MAX_WORDS))
    return `لطفاً جملاتی کوتاه‌تر از ${MAX_WORDS} کلمه انتخاب کنید`;
  if (!(content.length >= MIN_CHARS))
    return `لطفاً جملاتی بلند‌تر از ${MIN_CHARS} حرف انتخاب کنید`;
  if (!(content.length <= MAX_CHARS))
    return `لطفاً جملاتی کوتاه‌تر از ${MAX_CHARS} حرف انتخاب کنید`;
  const wordMap = {};
  words.forEach((element) => {
    if (!wordMap[element]) wordMap[element] = 1;
    else wordMap[element]++;
  });
  if (
    words.some(
      (w) => wordMap[w] / words.length > MAX_DUPLICATE_WORD_PERCENTAGE / 100
    ) &&
    words.length >= 4
  )
    return `لطفاً از تکرار کلمات بپرهیزید`;
  if (!persianRex.hasLetter.test(content))
    return `لطفاً از جملات فارسی استفاده کنید`;

  if (words.some((w) => BAD_WORDS.includes(Base64.encode(w))))
    return `لطفاً از استفاده از کلمات نامناسب بپرهیزید`;

  return null;
};

export default isContentValid;
